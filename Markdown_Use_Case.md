# Сценарий авторизации

**Акторы:** Зарегистрированный пользователь, незарегистрированный пользователь, система

**Цель:** я как пользователь хочу авторизоваться в системе, чтобы войти в свою учетную запись для оплаты заказа и просмотра истории заказов.

**Основная ветка:**

1. Пользователь нажимает на кнопку Войти на главной странице.
2. Система отображает окно авторизации с выбором Вход и Регистрация.
3. Пользователь выбирает: Вход см. **Альтернативный сценарий 1**; Регистрация см. **Альтернативный сценарий 2** и **Альтернативный сценарий 3**.
4. Система отображает учётную запись пользователя.

**Альтернативный сценарий 1:**

3. Пользователь вводит логин (емейл или номер телефона) и пароль.
4. Система сверяет учетные данные в БД и отправляет разрешение на авторизацию.
5. Возврат на шаг 4 основной ветки.

**Альтернативный сценарий 2:**

3. Клиент кликает Регистрация в системе с кодом подтверждения по СМС.
4. Пользователь вводит свой номер телефона.
5. Система отправляет код подтверждения на введенный номер телефона. [TP-17: Регистрация с кодом подтверждения по СМС](https://test-project-ai.atlassian.net/browse/TP-17)
6. Пользователь нажимает на кнопку Войти на главной странице.
7. Система отображает окно авторизации с выбором Вход и Регистрация.
8. Пользователь нажимает на кнопку Вход.
9. Система отображает выбор входа с телефоном или емейлом.
10. Пользователь выбирает опцию телефон.
11. Пользователь вводит свой номер телефона и код авторизации.
12. Система сверяет учетные данные в БД и отправляет разрешение на авторизацию.
13. Возврат на шаг 4 основной ветки.

**Альтернативный сценарий 3:**

3. **a** Пользователь выбирает Регистрация в системе с временным паролем по емейлу.
4. **a** Пользователь вводит свой емейл.
5. **a** Система отправляет временный пароль на емейл адрес пользователя. [TP-21: Регистрация с временным паролем через емейл](https://test-project-ai.atlassian.net/browse/TP-21)
6. **a** Пользователь нажимает на кнопку Войти на главной странице.
7. **a** Система отображает окно авторизации с выбором Вход и Регистрация.
8. **a** Пользователь нажимает на кнопку Вход.
9. **a** Система отображает выбор входа с телефон или емейлом.
10. **a** Пользователь выбирает опцию емейл.
11. **a** Пользователь вводит свой емейл и временный пароль.
12. **a** Система сверяет учетные данные в БД и отправляет разрешение на авторизацию.
13. **a** Возврат на шаг 4 основной ветки.

**Исключение 1:**

3. **a** Пользователь выбирает Вход в окне авторизации и вводит учетные данные.
4. **a** Система сверяет учетные данные в БД и они не совпадают с данными в системе.
5. **a** Система отправляет сообщение в окне авторизации проверить правильность введенных данных.

**Исключение 2:**

3. **b** Пользователь выбирает Вход в окне авторизации и вводит учетные данные.
4. **b** Система сверяет учетные данные в БД и они не совпадают с данными в системе.
5. **b** Система отправляет сообщение в окне авторизации проверить правильность введенных данных.
6. **b** Пользователь выбирает Забыл пароль в окне авторизации Вход.
7. **b** Система показывает на выбор восстановить пароль по СМС или емейлу. [TP-19: Восстановление пароля по СМС](https://test-project-ai.atlassian.net/browse/TP-19) [TP-20: Восстановление пароля по емейлу](https://test-project-ai.atlassian.net/browse/TP-20) 